!function(a){"use strict";function k(a){a=l(a),c=a.sourceID,d=a.apiToken,"true"===a.secureTransport?e="https:":"false"===a.secureTransport&&(e="http:"),f=e+b+"/"+c+"?token="+d}function l(a){if(!(a&&a.sourceID&&a.apiToken))throw new q(i.CLIENT_ERROR,"`sourceID` and `apiToken` must be specified.");if(a.sourceID=a.sourceID.toLowerCase(),a.apiToken=a.apiToken.toLowerCase(),!s(a.sourceID)||!s(a.apiToken))throw new q(i.CLIENT_ERROR,"`sourceID` and `apiToken` must be valid UUIDs.");if(a.secureTransport=""+a.secureTransport||"auto",!~["false","true","auto"].indexOf(a.secureTransport))throw new q(i.CLIENT_ERROR,"Unrecognized value for secureTransport. It must be false, true or auto.");return a}function m(a){return this.timeoutAfter=a.timeoutAfter||h,this.retryOnTimeout=a.retryOnTimeout||0,this.request=new XMLHttpRequest,this.body=a.body,this}function n(){return this.retryOnTimeout<=0?this.onError(new q(i.TIMEDOUT,"The request took too long time.")):new m({timeoutAfter:this.timeoutAfter,retryOnTimeout:this.retryOnTimeout-1,body:this.body}).onSuccess(this.onSuccess).onError(this.onError).done()}function o(){var a=this.request;if(a.readyState===j.DONE){if(204===a.status)return this.onSuccess();var b=a.status>=400&&a.status<500?i.CLIENT_ERROR:i.SERVER_ERROR;return this.onError(new q(b,a.responseText))}}function p(a){this.onError(new q(i.NETWORK_ERROR,a))}function q(a,b){var c=(new Error).stack,d=c&&c.match(/[^\s]+$/)||"";this.code=a,this.message=b,this.stack=this.name+" at "+d}function r(){}function s(a){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/.test(a)}if(a.Qoncrete)throw new Error("`Qoncrete` is already defined in the global namespace!");var b="//log.qoncrete.com",c=null,d=null,e="",f=null,g={SECOND:1e3},h=15*g.SECOND,i={INVALID_BODY:"INVALID_BODY",TIMEDOUT:"TIMEDOUT",CLIENT_ERROR:"CLIENT_ERROR",SERVER_ERROR:"SERVER_ERROR",NETWORK_ERROR:"NETWORK_ERROR"},j={DONE:4};k.prototype.send=function(a,b,c){return b=b||{},b.body=a,"function"!=typeof c?new m(b):new m(b).onSuccess(c).onError(c).done()},m.prototype.onSuccess=function(a){return"function"!=typeof a&&(a=r),this.onSuccess=a,this},m.prototype.onError=function(a){return"function"!=typeof a&&(a=r),this.onError=a,this},m.prototype.done=function(){try{this.body=JSON.stringify(this.body)}catch(a){return this.onError(new q(i.INVALID_BODY,a))}this.request.ontimeout=n.bind(this),this.request.onload=o.bind(this),this.request.onerror=p.bind(this),this.request.open("GET",f+"&body="+encodeURIComponent(this.body),!0),this.request.timeout=this.timeoutAfter,this.request.send(null)},Object.setPrototypeOf(q,Error),q.prototype=Object.create(Error.prototype),q.prototype.name="QoncreteError",q.prototype.message="",q.prototype.constructor=q,a.Qoncrete=k}(this);